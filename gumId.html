<html>
    <head>
        <title>Set GUM Id for Criteo</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>

        <script>
            !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="lWOajUEbU0QbTZJLe4LJnq4h8yWbLURj";;analytics.SNIPPET_VERSION="4.15.3";
            // analytics.load("0XBnO9NWRsOtu3ERcCQ46CZaTl0XgHMb");  (Customer Test)
            analytics.load("lWOajUEbU0QbTZJLe4LJnq4h8yWbLURj");
            analytics.page();
            }}();
        </script>
    </head>
<body>
  <nav style="text-align: center;">
    <a href="/">Home</a>
  </nav>
    <div class="container h-100">
        <h1>Criteo GUM ID</h1>
        <div id="response">Waiting...</div>
  </div>
    
    
    <script>
        analytics.ready(function () {
            // alert("Analytics Ready");
            // location.assign('https://segmentchris.github.io/');
            var aId = analytics.user().anonymousId();
            jQuery("#response").html("Analytics is ready.  Welcome User " + aId);
        });

        let xhr = new XMLHttpRequest();
        xhr.open('get', 'https://gum.criteo.com/sync?c=510&r=2&j=gumId&a=1');
        xhr.send();

        xhr.onload = function() {
            console.log(xhr.response);
            console.log(xhr.getAllResponseHeaders());
        };

        /*
        (async function (data = {}) {  
            try{
                const url =  'https://gum.criteo.com/sync?c=510&r=2&j=gumId&a=1';
                const response = await fetch(url);
                data =  await response.json(); 
                console.log(JSON.stringify(data));
                // parses JSON response into JavaScript objects
            } catch {  
                console.log("there was an error resolving your promise");
            }
            //console.log("heres your jokes", data);
        })();
        */
    </script>
   
</body></html>  